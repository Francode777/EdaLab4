import java.text.SimpleDateFormat;
import java.util.*;
import java.util.ArrayList;
public class Hospital {

    private Map<String, Patient> totalPatient;
    private PriorityQueue<Patient> attentionQueue; //gestiona a los pacientes en espera
    private Map<String, AreaAttention> areasAttention;// asignar paciente a areas especificas
    private List<Patient> patientAttended;// pacientes para la casa

    Hospital(){
        int[] capacity = {30,90,120,200};
        for (int i = 1; i <= 5; i++) {
            String areaName = "C" + i;
            areasAttention.put(areaName, new AreaAttention(areaName, capacity[i]));
        }
    }

    void registerPatient(Patient patient){
        String id = patient.getID();
        totalPatient.put(id, patient);
        attentionQueue.add(patient);
        // asigna su categoria y su area de atencion?
    }
    void realiseCategory(String ID, int newCategory){
        Patient patient = totalPatient.get(ID);
        patient.setCategory(newCategory);
        patient.recordChange();
    }
    public Patient nextpatient(){
        if(attentionQueue.isEmpty()){
            System.out.println("No patients attention available");
            return null;
        }

        Patient patient = attentionQueue.poll();// deberia ya estar ordenado
        int category = patient.getCategoria();
        String areaName = "C" + category;

        AreaAttention area = areasAttention.get(areaName);

        if(area != null){
            area.ingresarPaciente(patient);
            System.out.println("Paciente " + patient.getID() + " asignado a área " + areaName);
        }else {
            System.out.println("Área " + areaName + " no encontrada.");
        }

        return null;
    }

    public List<Patient> getPatientsByCategory(int category){//saca al de mayor categoria y lo asigna a su area???

        return null;
    }

    public AreaAttention getArea(String nameArea){
    //devuelve el área correspondiente por nombre(problema que veo es que si hay mas de una persona con ese nombre,
        // imagino que se pide nombre y apellido, el cual tambien se puede repitir por lo cual es un posible problema)

        return null;
    }



}
